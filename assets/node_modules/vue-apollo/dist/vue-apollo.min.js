var VueApollo=function(t){"use strict";function e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function r(t,e){return!!(t?t.length:0)&&a(t,e,0)>-1}function i(t,e,r){for(var i=-1,n=t?t.length:0;++i<n;)if(r(e,t[i]))return!0;return!1}function n(t,e){for(var r=-1,i=t?t.length:0,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}function o(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function s(t,e,r,i){for(var n=t.length,o=r+(i?1:-1);i?o--:++o<n;)if(e(t[o],o,t))return o;return-1}function a(t,e,r){if(e!=e)return s(t,u,r);for(var i=r-1,n=t.length;++i<n;)if(t[i]===e)return i;return-1}function u(t){return t!=t}function l(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function c(t){return function(e){return t(e)}}function h(t,e){return t.has(e)}function f(t,e){return null==t?void 0:t[e]}function p(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function v(t,e){return function(r){return t(e(r))}}function y(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function d(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function b(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function g(t){var e=-1,r=t?t.length:0;for(this.__data__=new b;++e<r;)this.add(t[e])}function m(t,e){var r=Ht(t)||D(t)?l(t.length,String):[],i=r.length,n=!!i;for(var o in t)!e&&!Et.call(t,o)||n&&("length"==o||Q(o,i))||r.push(o);return r}function _(t,e){for(var r=t.length;r--;)if(R(t[r][0],e))return r;return-1}function w(t,e,o,s){var a=-1,u=r,l=!0,f=t.length,p=[],v=e.length;if(!f)return p;o&&(e=n(e,c(o))),s?(u=i,l=!1):e.length>=ht&&(u=h,l=!1,e=new g(e));t:for(;++a<f;){var y=t[a],d=o?o(y):y;if(y=s||0!==y?y:0,l&&d==d){for(var b=v;b--;)if(e[b]===d)continue t;p.push(y)}else u(e,d,s)||p.push(y)}return p}function k(t,e,r,i,n){var s=-1,a=t.length;for(r||(r=L),n||(n=[]);++s<a;){var u=t[s];e>0&&r(u)?e>1?k(u,e-1,r,i,n):o(n,u):i||(n[n.length]=u)}return n}function O(t,e,r){var i=e(t);return Ht(t)?i:o(i,r(t))}function j(t){return!(!W(t)||q(t))&&(F(t)||p(t)?Qt:mt).test(K(t))}function S(t){if(!W(t))return C(t);var e=M(t),r=[];for(var i in t)("constructor"!=i||!e&&Et.call(t,i))&&r.push(i);return r}function $(t,e){return t=Object(t),A(t,e,function(e,r){return r in t})}function A(t,e,r){for(var i=-1,n=e.length,o={};++i<n;){var s=e[i],a=t[s];r(a,s)&&(o[s]=a)}return o}function P(t){return O(t,U,Ft)}function x(t,e){var r=t.__data__;return T(e)?r["string"==typeof e?"string":"hash"]:r.map}function E(t,e){var r=f(t,e);return j(r)?r:void 0}function L(t){return Ht(t)||D(t)||!!(Vt&&t&&t[Vt])}function Q(t,e){return!!(e=null==e?vt:e)&&("number"==typeof t||_t.test(t))&&t>-1&&t%1==0&&t<e}function T(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function q(t){return!!Pt&&Pt in t}function M(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$t)}function C(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function V(t){if("string"==typeof t||J(t))return t;var e=t+"";return"0"==e&&1/t==-pt?"-0":e}function K(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t,e){return t===e||t!=t&&e!=e}function D(t){return I(t)&&Et.call(t,"callee")&&(!Mt.call(t,"callee")||Lt.call(t)==yt)}function N(t){return null!=t&&H(t.length)&&!F(t)}function I(t){return G(t)&&N(t)}function F(t){var e=W(t)?Lt.call(t):"";return e==dt||e==bt}function H(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=vt}function W(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){return!!t&&"object"==typeof t}function J(t){return"symbol"==typeof t||G(t)&&Lt.call(t)==gt}function U(t){return N(t)?m(t,!0):S(t)}function z(){return[]}function B(t,e,r){function i(e){var r=c,i=h;return c=h=void 0,d=e,p=t.apply(i,r)}function n(t){return d=t,v=setTimeout(a,e),b?i(t):p}function o(t){var r=e-(t-y);return g?oe(r,f-(t-d)):r}function s(t){var r=t-y;return void 0===y||r>=e||r<0||g&&t-d>=f}function a(){var t=se();if(s(t))return u(t);v=setTimeout(a,o(t))}function u(t){return v=void 0,m&&c?i(t):(c=h=void 0,p)}function l(){var t=se(),r=s(t);if(c=arguments,h=this,y=t,r){if(void 0===v)return n(y);if(g)return v=setTimeout(a,e),i(y)}return void 0===v&&(v=setTimeout(a,e)),p}var c,h,f,p,v,y,d=0,b=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError(Gt);return e=tt(e)||0,X(r)&&(b=!!r.leading,f=(g="maxWait"in r)?ne(tt(r.maxWait)||0,e):f,m="trailing"in r?!!r.trailing:m),l.cancel=function(){void 0!==v&&clearTimeout(v),d=0,c=y=h=v=void 0},l.flush=function(){return void 0===v?p:u(se())},l}function X(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Y(t){return!!t&&"object"==typeof t}function Z(t){return"symbol"==typeof t||Y(t)&&ie.call(t)==Ut}function tt(t){if("number"==typeof t)return t;if(Z(t))return Jt;if(X(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=X(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(zt,"");var r=Xt.test(t);return r||Yt.test(t)?Zt(t.slice(2),r?2:8):Bt.test(t)?Jt:+t}function et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function rt(t){return!!t&&"object"==typeof t}function it(t){return"symbol"==typeof t||rt(t)&&ge.call(t)==le}function nt(t){if("number"==typeof t)return t;if(it(t))return ue;if(et(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=et(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ce,"");var r=fe.test(t);return r||pe.test(t)?ve(t.slice(2),r?2:8):he.test(t)?ue:+t}function ot(t){return function(e,r){return"number"==typeof r?t(e,r):t(e,r.wait,r)}}function st(t){return ke.Vue.util.mergeOptions({},t)}function at(t,e){for(;"function"==typeof t;)t=t.call(e);return t}function ut(t,e,r){void 0!==r&&("function"==typeof r?t.defineReactiveSetter(e,r):t[e]=r)}function lt(t,e){if(!lt.installed){lt.installed=!0,ke.Vue=t;var r=t.config.optionMergeStrategies.methods;t.config.optionMergeStrategies.apollo=function(t,e,i){if(!t)return e;if(!e)return t;for(var n=Object.assign({},Wt(t,De),t.data),o=Object.assign({},Wt(e,De),e.data),s={},a=0;a<De.length;a++){var u=De[a];s[u]=r(t[u],e[u])}return Object.assign(s,r(n,o))},Object.defineProperty(t.prototype,"$apollo",{get:function(){return this._apollo||(this._apollo=new Ve(this)),this._apollo}}),t.mixin({init:Ne,beforeCreate:Ne,data:function(){return this._apolloInitData||{}},created:Ie,destroyed:function(){this._apollo&&(this._apollo.destroy(),this._apollo=null)}})}}var ct="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ht=200,ft="__lodash_hash_undefined__",pt=1/0,vt=9007199254740991,yt="[object Arguments]",dt="[object Function]",bt="[object GeneratorFunction]",gt="[object Symbol]",mt=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,wt="object"==typeof ct&&ct&&ct.Object===Object&&ct,kt="object"==typeof self&&self&&self.Object===Object&&self,Ot=wt||kt||Function("return this")(),jt=Array.prototype,St=Function.prototype,$t=Object.prototype,At=Ot["__core-js_shared__"],Pt=function(){var t=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xt=St.toString,Et=$t.hasOwnProperty,Lt=$t.toString,Qt=RegExp("^"+xt.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=Ot.Symbol,qt=v(Object.getPrototypeOf,Object),Mt=$t.propertyIsEnumerable,Ct=jt.splice,Vt=Tt?Tt.isConcatSpreadable:void 0,Kt=Object.getOwnPropertySymbols,Rt=Math.max,Dt=E(Ot,"Map"),Nt=E(Object,"create");y.prototype.clear=function(){this.__data__=Nt?Nt(null):{}},y.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},y.prototype.get=function(t){var e=this.__data__;if(Nt){var r=e[t];return r===ft?void 0:r}return Et.call(e,t)?e[t]:void 0},y.prototype.has=function(t){var e=this.__data__;return Nt?void 0!==e[t]:Et.call(e,t)},y.prototype.set=function(t,e){return this.__data__[t]=Nt&&void 0===e?ft:e,this},d.prototype.clear=function(){this.__data__=[]},d.prototype.delete=function(t){var e=this.__data__,r=_(e,t);return!(r<0||(r==e.length-1?e.pop():Ct.call(e,r,1),0))},d.prototype.get=function(t){var e=this.__data__,r=_(e,t);return r<0?void 0:e[r][1]},d.prototype.has=function(t){return _(this.__data__,t)>-1},d.prototype.set=function(t,e){var r=this.__data__,i=_(r,t);return i<0?r.push([t,e]):r[i][1]=e,this},b.prototype.clear=function(){this.__data__={hash:new y,map:new(Dt||d),string:new y}},b.prototype.delete=function(t){return x(this,t).delete(t)},b.prototype.get=function(t){return x(this,t).get(t)},b.prototype.has=function(t){return x(this,t).has(t)},b.prototype.set=function(t,e){return x(this,t).set(t,e),this},g.prototype.add=g.prototype.push=function(t){return this.__data__.set(t,ft),this},g.prototype.has=function(t){return this.__data__.has(t)};var It=Kt?v(Kt,Object):z,Ft=Kt?function(t){for(var e=[];t;)o(e,It(t)),t=qt(t);return e}:z,Ht=Array.isArray,Wt=function(t,r){return r=Rt(void 0===r?t.length-1:r,0),function(){for(var i=arguments,n=-1,o=Rt(i.length-r,0),s=Array(o);++n<o;)s[n]=i[r+n];n=-1;for(var a=Array(r+1);++n<r;)a[n]=i[n];return a[r]=s,e(t,this,a)}}(function(t,e){return null==t?{}:(e=n(k(e,1),V),$(t,w(P(t),e)))}),Gt="Expected a function",Jt=NaN,Ut="[object Symbol]",zt=/^\s+|\s+$/g,Bt=/^[-+]0x[0-9a-f]+$/i,Xt=/^0b[01]+$/i,Yt=/^0o[0-7]+$/i,Zt=parseInt,te="object"==typeof ct&&ct&&ct.Object===Object&&ct,ee="object"==typeof self&&self&&self.Object===Object&&self,re=te||ee||Function("return this")(),ie=Object.prototype.toString,ne=Math.max,oe=Math.min,se=function(){return re.Date.now()},ae="Expected a function",ue=NaN,le="[object Symbol]",ce=/^\s+|\s+$/g,he=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,pe=/^0o[0-7]+$/i,ve=parseInt,ye="object"==typeof ct&&ct&&ct.Object===Object&&ct,de="object"==typeof self&&self&&self.Object===Object&&self,be=ye||de||Function("return this")(),ge=Object.prototype.toString,me=Math.max,_e=Math.min,we=function(){return be.Date.now()},ke={},Oe=ot(function(t,e,r){var i=!0,n=!0;if("function"!=typeof t)throw new TypeError(Gt);return X(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),B(t,e,{leading:i,maxWait:e,trailing:n})}),je=ot(function(t,e,r){function i(e){var r=c,i=h;return c=h=void 0,d=e,p=t.apply(i,r)}function n(t){return d=t,v=setTimeout(a,e),b?i(t):p}function o(t){var r=e-(t-y);return g?_e(r,f-(t-d)):r}function s(t){var r=t-y;return void 0===y||r>=e||r<0||g&&t-d>=f}function a(){var t=we();if(s(t))return u(t);v=setTimeout(a,o(t))}function u(t){return v=void 0,m&&c?i(t):(c=h=void 0,p)}function l(){var t=we(),r=s(t);if(c=arguments,h=this,y=t,r){if(void 0===v)return n(y);if(g)return v=setTimeout(a,e),i(y)}return void 0===v&&(v=setTimeout(a,e)),p}var c,h,f,p,v,y,d=0,b=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError(ae);return e=nt(e)||0,et(r)&&(b=!!r.leading,f=(g="maxWait"in r)?me(nt(r.maxWait)||0,e):f,m="trailing"in r?!!r.trailing:m),l.cancel=function(){void 0!==v&&clearTimeout(v),d=0,c=y=h=v=void 0},l.flush=function(){return void 0===v?p:u(we())},l}),Se=["variables","watch","update","result","error","loadingKey","watchLoading","skip","throttle","debounce","subscribeToMore","prefetch","manual"],$e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae=(function(){function t(t){this.value=t}function e(e){function r(n,o){try{var s=e[n](o),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){r("next",t)},function(t){r("throw",t)}):i(s.done?"return":"normal",s.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?r(n.key,n.arg):o=null}var n,o;this._invoke=function(t,e){return new Promise(function(i,s){var a={key:t,arg:e,resolve:i,reject:s,next:null};o?o=o.next=a:(n=o=a,r(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),Pe=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),xe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ee=function t(e,r,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},Le=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Qe=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Te=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},qe=function(){function t(e,r,i){var n=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(Ae(this,t),this.type=null,this.vueApolloSpecialKeys=[],this.vm=e,this.key=r,this.options=Object.assign({},i),this._skip=!1,this._watchers=[],"function"==typeof this.options.query){var s=this.options.query.bind(this.vm);this.options.query=s(),this._watchers.push(this.vm.$watch(s,function(t){n.options.query=t,n.refresh()}))}if("function"==typeof this.options.document){var a=this.options.document.bind(this.vm);this.options.document=a(),this._watchers.push(this.vm.$watch(a,function(t){n.options.document=t,n.refresh()}))}this.vm.$isServer&&(this.options.fetchPolicy="cache-first"),o&&this.autostart()}return Pe(t,[{key:"autostart",value:function(){"function"==typeof this.options.skip?this._watchers.push(this.vm.$watch(this.options.skip.bind(this.vm),this.skipChanged.bind(this),{immediate:!0})):this.options.skip?this._skip=!0:this.start()}},{key:"skipChanged",value:function(t,e){t!==e&&(this.skip=t)}},{key:"refresh",value:function(){this._skip||(this.stop(),this.start())}},{key:"start",value:function(){var t=this;if(this.starting=!0,"function"==typeof this.options.variables){var e=this.executeApollo.bind(this);e=this.options.throttle?Oe(e,this.options.throttle):e,e=this.options.debounce?je(e,this.options.debounce):e,this.unwatchVariables=this.vm.$watch(function(){return t.options.variables.call(t.vm)},e,{immediate:!0})}else this.executeApollo(this.options.variables)}},{key:"stop",value:function(){this.unwatchVariables&&(this.unwatchVariables(),this.unwatchVariables=null),this.sub&&(this.sub.unsubscribe(),this.sub=null)}},{key:"generateApolloOptions",value:function(t){var e=Wt(this.options,this.vueApolloSpecialKeys);return e.variables=t,e}},{key:"executeApollo",value:function(t){this.starting=!1}},{key:"nextResult",value:function(){throw new Error("Not implemented")}},{key:"errorHandler",value:function(){for(var t,e,r,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];this.options.error&&(t=this.options.error).call.apply(t,[this.vm].concat(n)),this.vm.$apollo.error&&(e=this.vm.$apollo.error).call.apply(e,[this.vm].concat(n)),this.vm.$apollo.provider.errorHandler&&(r=this.vm.$apollo.provider.errorHandler).call.apply(r,[this.vm].concat(n))}},{key:"catchError",value:function(t){if(t.graphQLErrors&&0!==t.graphQLErrors.length){console.error("GraphQL execution errors for "+this.type+" '"+this.key+"'");var e=!0,r=!1,i=void 0;try{for(var n,o=t.graphQLErrors[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;console.error(s)}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}}else if(t.networkError)console.error("Error sending the "+this.type+" '"+this.key+"'",t.networkError);else if(console.error("[vue-apollo] An error has occured for "+this.type+" '"+this.key+"'"),Array.isArray(t)){var a;(a=console).error.apply(a,Te(t))}else console.error(t);this.errorHandler(t)}},{key:"destroy",value:function(){this.stop();var t=!0,e=!1,r=void 0;try{for(var i,n=this._watchers[Symbol.iterator]();!(t=(i=n.next()).done);t=!0)(0,i.value)()}catch(t){e=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw r}}}},{key:"skip",get:function(){return this._skip},set:function(t){t?this.stop():this.start(),this._skip=t}}]),t}(),Me=function(t){function e(t,r,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Ae(this,e),i.query||(i={query:i});var o=Qe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i,n));return o.type="query",o.vueApolloSpecialKeys=Se,o.loading=!1,o}return Le(e,qe),Pe(e,[{key:"stop",value:function(){Ee(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this),this.observer&&(this.observer.stopPolling(),this.observer=null)}},{key:"executeApollo",value:function(t){this.observer?this.observer.setOptions(this.generateApolloOptions(t)):(this.sub&&this.sub.unsubscribe(),this.observer=this.vm.$apollo.watchQuery(this.generateApolloOptions(t)),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)}));var r=this.maySetLoading();r.loading||this.nextResult(r),Ee(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"executeApollo",this).call(this,t)}},{key:"maySetLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.observer.currentResult();return(t||e.loading)&&(this.loading||this.applyLoadingModifier(1),this.loading=!0),e}},{key:"nextResult",value:function(t){var e=t.data;t.loading||this.loadingDone();var r="function"==typeof this.options.result;void 0===e||("function"==typeof this.options.update?this.vm[this.key]=this.options.update.call(this.vm,e):void 0===e[this.key]?console.error("Missing "+this.key+" attribute on result",e):this.options.manual?r||console.error(this.key+" query must have a 'result' hook in manual mode"):this.vm[this.key]=e[this.key]),r&&this.options.result.call(this.vm,t)}},{key:"catchError",value:function(t){Ee(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"catchError",this).call(this,t),this.loadingDone()}},{key:"watchLoading",value:function(){for(var t,e,r,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];this.options.watchLoading&&(t=this.options.watchLoading).call.apply(t,[this.vm].concat(n)),this.vm.$apollo.watchLoading&&(e=this.vm.$apollo.watchLoading).call.apply(e,[this.vm].concat(n)),this.vm.$apollo.provider.watchLoading&&(r=this.vm.$apollo.provider.watchLoading).call.apply(r,[this.vm].concat(n))}},{key:"applyLoadingModifier",value:function(t){var e=this.loadingKey;e&&"number"==typeof this.vm[e]&&(this.vm[e]+=t),this.watchLoading(1===t,t)}},{key:"loadingDone",value:function(){this.loading&&this.applyLoadingModifier(-1),this.loading=!1}},{key:"fetchMore",value:function(){var t=this;if(this.observer){var e;return this.maySetLoading(!0),(e=this.observer).fetchMore.apply(e,arguments).then(function(e){return e.loading||t.loadingDone(),e})}}},{key:"subscribeToMore",value:function(){if(this.observer){var t;return{unsubscribe:(t=this.observer).subscribeToMore.apply(t,arguments)}}}},{key:"refetch",value:function(t){var e=this;if(t&&(this.options.variables=t),this.observer){var r=this.observer.refetch(t).then(function(t){return t.loading||e.loadingDone(),t});return this.maySetLoading(),r}}},{key:"setVariables",value:function(t,e){if(this.options.variables=t,this.observer){var r=this.observer.setVariables(t,e);return this.maySetLoading(),r}}},{key:"setOptions",value:function(t){if(Object.assign(this.options,t),this.observer){var e=this.observer.setOptions(t);return this.maySetLoading(),e}}},{key:"startPolling",value:function(){if(this.observer){var t;return(t=this.observer).startPolling.apply(t,arguments)}}},{key:"stopPolling",value:function(){if(this.observer){var t;return(t=this.observer).stopPolling.apply(t,arguments)}}},{key:"loadingKey",get:function(){return this.options.loadingKey||this.vm.$apollo.loadingKey}}]),e}(),Ce=function(t){function e(){var t,r,i,n;Ae(this,e);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=i=Qe(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.type="subscription",i.vueApolloSpecialKeys=["variables","result","error","throttle","debounce","linkedQuery"],n=r,Qe(i,n)}return Le(e,qe),Pe(e,[{key:"executeApollo",value:function(t){var r=JSON.stringify(t);if(this.sub){if(r===this.previousVariablesJson)return;this.sub.unsubscribe()}this.previousVariablesJson=r;var i=this.generateApolloOptions(t);this.options.linkedQuery?this.sub=this.options.linkedQuery.subscribeToMore(i):(this.observer=this.vm.$apollo.subscribe(i),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)})),Ee(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"executeApollo",this).call(this,t)}},{key:"nextResult",value:function(t){"function"==typeof this.options.result&&this.options.result.call(this.vm,t)}}]),e}(),Ve=function(){function t(e){Ae(this,t),this._apolloSubscriptions=[],this._watchers=[],this.vm=e,this.queries={},this.subscriptions={},this.client=void 0,this.loadingKey=void 0,this.error=void 0}return Pe(t,[{key:"query",value:function(t){return this.getClient(t).query(t)}},{key:"getClient",value:function(t){if(!t||!t.client){if("object"===$e(this.client))return this.client;if(this.client){if(this.provider.clients){var e=this.provider.clients[this.client];if(!e)throw new Error("[vue-apollo] Missing client '"+this.client+"' in 'apolloProvider'");return e}throw new Error("[vue-apollo] Missing 'clients' options in 'apolloProvider'")}return this.provider.defaultClient}var r=this.provider.clients[t.client];if(!r)throw new Error("[vue-apollo] Missing client '"+t.client+"' in 'apolloProvider'");return r}},{key:"watchQuery",value:function(t){var e=this,r=this.getClient(t).watchQuery(t),i=r.subscribe.bind(r);return r.subscribe=function(t){var r=i(t);return e._apolloSubscriptions.push(r),r},r}},{key:"mutate",value:function(t){return this.getClient(t).mutate(t)}},{key:"subscribe",value:function(t){var e=this;if(!this.vm.$isServer){var r=this.getClient(t).subscribe(t),i=r.subscribe.bind(r);return r.subscribe=function(t){var r=i(t);return e._apolloSubscriptions.push(r),r},r}}},{key:"addSmartQuery",value:function(t,e){var r=this;e=at(e,this.vm);var i=this.queries[t]=new Me(this.vm,t,e,!1);if(i.autostart(),!this.vm.$isServer){var n=e.subscribeToMore;n&&(Array.isArray(n)?n.forEach(function(e,n){r.addSmartSubscription(""+t+n,xe({},e,{linkedQuery:i}))}):this.addSmartSubscription(t,xe({},n,{linkedQuery:i})))}return i}},{key:"addSmartSubscription",value:function(t,e){if(!this.vm.$isServer){e=at(e,this.vm);var r=this.subscriptions[t]=new Ce(this.vm,t,e,!1);return r.autostart(),r}}},{key:"defineReactiveSetter",value:function(t,e){var r=this;this._watchers.push(this.vm.$watch(e,function(e){r[t]=e},{immediate:!0}))}},{key:"destroy",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,n=this._watchers[Symbol.iterator]();!(t=(i=n.next()).done);t=!0)(0,i.value)()}catch(t){e=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw r}}for(var o in this.queries)this.queries[o].destroy();for(var s in this.subscriptions)this.subscriptions[s].destroy();this._apolloSubscriptions.forEach(function(t){t.unsubscribe()}),this._apolloSubscriptions=null,this.vm=null}},{key:"provider",get:function(){return this._apolloProvider||this.vm.$root._apolloProvider}},{key:"skipAllQueries",set:function(t){for(var e in this.queries)this.queries[e].skip=t}},{key:"skipAllSubscriptions",set:function(t){for(var e in this.subscriptions)this.subscriptions[e].skip=t}},{key:"skipAll",set:function(t){this.skipAllQueries=t,this.skipAllSubscriptions=t}}]),t}(),Ke=function(){function t(e){if(Ae(this,t),!e)throw new Error("Options argument required");this.clients=e.clients||{},this.clients.defaultClient=this.defaultClient=e.defaultClient,this.defaultOptions=e.defaultOptions,this.watchLoading=e.watchLoading,this.errorHandler=e.errorHandler,this.prefetchQueries=[]}return Pe(t,[{key:"willPrefetchQuery",value:function(t,e){this.prefetchQueries.push({queryOptions:t,client:e})}},{key:"willPrefetch",value:function(t){var e=(t=st(t)).apollo;if(e){var r=e.$client;for(var i in e){var n=e[i];"$"===i.charAt(0)||n.query&&(void 0!==n.ssr&&!n.ssr||void 0===n.prefetch||!n.prefetch)||this.willPrefetchQuery(n,n.client||r)}}}},{key:"willPrefetchComponents",value:function(t){var e=!0,r=!1,i=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;this.willPrefetch(s)}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"prefetchAll",value:function(t,e,r){var i=this;r||!e||Array.isArray(e)||(r=e,e=void 0);var n=Object.assign({},{includeGlobal:!0},r);return e&&this.willPrefetchComponents(e),n.includeGlobal&&this.willPrefetchComponents(Re),Promise.all(this.prefetchQueries.map(function(e){return i.prefetchQuery(e.queryOptions,t,e.client)}))}},{key:"prefetchQuery",value:function(t,e,r){var i=void 0;if(r){if("string"==typeof r&&!(r=this.clients[r]))throw new Error("[vue-apollo] Missing client '"+r+"' in 'apolloProvider'")}else r=this.defaultClient;if(t.query){var n=t.prefetch,o=void 0===n?"undefined":$e(n);if("undefined"!==o){var s=void 0;if(!(s="function"===o?n(e):n))return Promise.resolve();if("boolean"===o){var a=t.variables;i=void 0!==a?"function"==typeof a?a.call(e):a:void 0}else i=s}}else t={query:t};return new Promise(function(e,n){var o=Wt(t,[].concat(Te(Se),["fetchPolicy"]));o.variables=i,o.fetchPolicy="network-only",r.query(o).then(e,n)})}},{key:"getStates",value:function(t){var e=Object.assign({},{exportNamespace:""},t),r={};for(var i in this.clients){var n=this.clients[i].cache.extract();r[""+e.exportNamespace+i]=n}return r}},{key:"exportStates",value:function(t){var e=Object.assign({},{globalName:"__APOLLO_STATE__",attachTo:"window"},t),r=this.getStates(e);return e.attachTo+"."+e.globalName+" = "+JSON.stringify(r)+";"}}]),t}(),Re=[],De=["$subscribe"],Ne=function(){var t=void 0;if(t=this.$options.apolloProvider?this._apolloProvider=this.$options.apolloProvider:this.$root._apolloProvider,!this._apolloPrepared){this._apolloPrepared=!0;var e=this.$options.apollo;if(e){this._apolloQueries={},this._apolloInitData={},e.$init||(e.$init=!0,t.defaultOptions&&(e=this.$options.apollo=Object.assign({},t.defaultOptions,e)));for(var r in e)"$"!==r.charAt(0)&&(this._apolloInitData[r]=null,this._apolloQueries[r]=e[r])}}},Ie=function(){if(!this._apolloLaunched){this._apolloLaunched=!0;var t=this.$options.apollo;if(t&&(ut(this.$apollo,"skipAll",t.$skipAll),ut(this.$apollo,"skipAllQueries",t.$skipAllQueries),ut(this.$apollo,"skipAllSubscriptions",t.$skipAllSubscriptions),ut(this.$apollo,"client",t.$client),ut(this.$apollo,"loadingKey",t.$loadingKey),ut(this.$apollo,"error",t.$error),ut(this.$apollo,"watchLoading",t.$watchLoading)),this._apolloQueries)for(var e in this._apolloQueries)this.$apollo.addSmartQuery(e,this._apolloQueries[e]);if(t&&(t.subscribe&&ke.Vue.util.warn("vue-apollo -> `subscribe` option is deprecated. Use the `$subscribe` option instead."),t.$subscribe))for(var r in t.$subscribe)this.$apollo.addSmartSubscription(r,t.$subscribe[r])}};Ke.install=lt,Ke.version="3.0.0-alpha.2";var Fe=Ke,He=null;return"undefined"!=typeof window?He=window.Vue:"undefined"!=typeof global&&(He=global.Vue),He&&He.use(Ke),t.install=lt,t.ApolloProvider=Fe,t.default=Ke,t.willPrefetch=function(t){return Re.push(t),t},t}({});
