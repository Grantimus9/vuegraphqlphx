{"version":3,"file":"bundle.umd.js","sources":["fragmentMatcher.js","objectCache.js","writeToStore.js","readFromStore.js","recordingCache.js","inMemoryCache.js"],"sourcesContent":["import { isTest, warnOnceInDevelopment } from 'apollo-utilities';\nvar haveWarned = false;\nvar HeuristicFragmentMatcher = (function () {\n    function HeuristicFragmentMatcher() {\n    }\n    HeuristicFragmentMatcher.prototype.ensureReady = function () {\n        return Promise.resolve();\n    };\n    HeuristicFragmentMatcher.prototype.canBypassInit = function () {\n        return true;\n    };\n    HeuristicFragmentMatcher.prototype.match = function (idValue, typeCondition, context) {\n        var obj = context.store.get(idValue.id);\n        if (!obj) {\n            return false;\n        }\n        if (!obj.__typename) {\n            if (!haveWarned) {\n                console.warn(\"You're using fragments in your queries, but either don't have the addTypename:\\n  true option set in Apollo Client, or you are trying to write a fragment to the store without the __typename.\\n   Please turn on the addTypename option and include __typename when writing fragments so that Apollo Client\\n   can accurately match fragments.\");\n                console.warn('Could not find __typename on Fragment ', typeCondition, obj);\n                console.warn(\"DEPRECATION WARNING: using fragments without __typename is unsupported behavior \" +\n                    \"and will be removed in future versions of Apollo client. You should fix this and set addTypename to true now.\");\n                if (!isTest()) {\n                    haveWarned = true;\n                }\n            }\n            context.returnPartialData = true;\n            return true;\n        }\n        if (obj.__typename === typeCondition) {\n            return true;\n        }\n        warnOnceInDevelopment(\"You are using the simple (heuristic) fragment matcher, but your queries contain union or interface types.\\n     Apollo Client will not be able to able to accurately map fragments.\" +\n            \"To make this error go away, use the IntrospectionFragmentMatcher as described in the docs: \" +\n            \"http://dev.apollodata.com/react/initialization.html#fragment-matcher\", 'error');\n        context.returnPartialData = true;\n        return true;\n    };\n    return HeuristicFragmentMatcher;\n}());\nexport { HeuristicFragmentMatcher };\nvar IntrospectionFragmentMatcher = (function () {\n    function IntrospectionFragmentMatcher(options) {\n        if (options && options.introspectionQueryResultData) {\n            this.possibleTypesMap = this.parseIntrospectionResult(options.introspectionQueryResultData);\n            this.isReady = true;\n        }\n        else {\n            this.isReady = false;\n        }\n        this.match = this.match.bind(this);\n    }\n    IntrospectionFragmentMatcher.prototype.match = function (idValue, typeCondition, context) {\n        if (!this.isReady) {\n            throw new Error('FragmentMatcher.match() was called before FragmentMatcher.init()');\n        }\n        var obj = context.store.get(idValue.id);\n        if (!obj) {\n            return false;\n        }\n        if (!obj.__typename) {\n            throw new Error(\"Cannot match fragment because __typename property is missing: \" + JSON.stringify(obj));\n        }\n        if (obj.__typename === typeCondition) {\n            return true;\n        }\n        var implementingTypes = this.possibleTypesMap[typeCondition];\n        if (implementingTypes && implementingTypes.indexOf(obj.__typename) > -1) {\n            return true;\n        }\n        return false;\n    };\n    IntrospectionFragmentMatcher.prototype.parseIntrospectionResult = function (introspectionResultData) {\n        var typeMap = {};\n        introspectionResultData.__schema.types.forEach(function (type) {\n            if (type.kind === 'UNION' || type.kind === 'INTERFACE') {\n                typeMap[type.name] = type.possibleTypes.map(function (implementingType) { return implementingType.name; });\n            }\n        });\n        return typeMap;\n    };\n    return IntrospectionFragmentMatcher;\n}());\nexport { IntrospectionFragmentMatcher };\n//# sourceMappingURL=fragmentMatcher.js.map","var ObjectCache = (function () {\n    function ObjectCache(data) {\n        if (data === void 0) { data = {}; }\n        this.data = data;\n    }\n    ObjectCache.prototype.toObject = function () {\n        return this.data;\n    };\n    ObjectCache.prototype.get = function (dataId) {\n        return this.data[dataId];\n    };\n    ObjectCache.prototype.set = function (dataId, value) {\n        this.data[dataId] = value;\n    };\n    ObjectCache.prototype.delete = function (dataId) {\n        this.data[dataId] = undefined;\n    };\n    ObjectCache.prototype.clear = function () {\n        this.data = {};\n    };\n    ObjectCache.prototype.replace = function (newData) {\n        this.data = newData || {};\n    };\n    return ObjectCache;\n}());\nexport { ObjectCache };\nexport function defaultNormalizedCacheFactory(seed) {\n    return new ObjectCache(seed);\n}\n//# sourceMappingURL=objectCache.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { print } from 'graphql/language/printer';\nimport { assign, createFragmentMap, getDefaultValues, getFragmentDefinitions, getOperationDefinition, isField, isIdValue, isInlineFragment, isProduction, resultKeyNameFromField, shouldInclude, storeKeyNameFromField, getQueryDefinition, } from 'apollo-utilities';\nimport { defaultNormalizedCacheFactory, ObjectCache } from './objectCache';\nvar WriteError = (function (_super) {\n    __extends(WriteError, _super);\n    function WriteError() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'WriteError';\n        return _this;\n    }\n    return WriteError;\n}(Error));\nexport { WriteError };\nexport function enhanceErrorWithDocument(error, document) {\n    var enhancedError = new WriteError(\"Error writing result to store for query:\\n \" + print(document));\n    enhancedError.message += '\\n' + error.message;\n    enhancedError.stack = error.stack;\n    return enhancedError;\n}\nexport function writeQueryToStore(_a) {\n    var result = _a.result, query = _a.query, _b = _a.storeFactory, storeFactory = _b === void 0 ? defaultNormalizedCacheFactory : _b, _c = _a.store, store = _c === void 0 ? storeFactory() : _c, variables = _a.variables, dataIdFromObject = _a.dataIdFromObject, _d = _a.fragmentMap, fragmentMap = _d === void 0 ? {} : _d, fragmentMatcherFunction = _a.fragmentMatcherFunction;\n    var queryDefinition = getQueryDefinition(query);\n    variables = assign({}, getDefaultValues(queryDefinition), variables);\n    try {\n        return writeSelectionSetToStore({\n            dataId: 'ROOT_QUERY',\n            result: result,\n            selectionSet: queryDefinition.selectionSet,\n            context: {\n                store: store,\n                storeFactory: storeFactory,\n                processedData: {},\n                variables: variables,\n                dataIdFromObject: dataIdFromObject,\n                fragmentMap: fragmentMap,\n                fragmentMatcherFunction: fragmentMatcherFunction,\n            },\n        });\n    }\n    catch (e) {\n        throw enhanceErrorWithDocument(e, query);\n    }\n}\nexport function writeResultToStore(_a) {\n    var dataId = _a.dataId, result = _a.result, document = _a.document, _b = _a.storeFactory, storeFactory = _b === void 0 ? defaultNormalizedCacheFactory : _b, _c = _a.store, store = _c === void 0 ? storeFactory() : _c, variables = _a.variables, dataIdFromObject = _a.dataIdFromObject, fragmentMatcherFunction = _a.fragmentMatcherFunction;\n    var operationDefinition = getOperationDefinition(document);\n    var selectionSet = operationDefinition.selectionSet;\n    var fragmentMap = createFragmentMap(getFragmentDefinitions(document));\n    variables = assign({}, getDefaultValues(operationDefinition), variables);\n    try {\n        return writeSelectionSetToStore({\n            result: result,\n            dataId: dataId,\n            selectionSet: selectionSet,\n            context: {\n                store: store,\n                storeFactory: storeFactory,\n                processedData: {},\n                variables: variables,\n                dataIdFromObject: dataIdFromObject,\n                fragmentMap: fragmentMap,\n                fragmentMatcherFunction: fragmentMatcherFunction,\n            },\n        });\n    }\n    catch (e) {\n        throw enhanceErrorWithDocument(e, document);\n    }\n}\nexport function writeSelectionSetToStore(_a) {\n    var result = _a.result, dataId = _a.dataId, selectionSet = _a.selectionSet, context = _a.context;\n    var variables = context.variables, store = context.store, fragmentMap = context.fragmentMap;\n    selectionSet.selections.forEach(function (selection) {\n        var included = shouldInclude(selection, variables);\n        if (isField(selection)) {\n            var resultFieldKey = resultKeyNameFromField(selection);\n            var value = result[resultFieldKey];\n            if (included) {\n                if (typeof value !== 'undefined') {\n                    writeFieldToStore({\n                        dataId: dataId,\n                        value: value,\n                        field: selection,\n                        context: context,\n                    });\n                }\n                else {\n                    var isDefered = selection.directives &&\n                        selection.directives.length &&\n                        selection.directives.some(function (directive) { return directive.name && directive.name.value === 'defer'; });\n                    if (!isDefered && context.fragmentMatcherFunction) {\n                        if (!isProduction()) {\n                            console.warn(\"Missing field \" + resultFieldKey + \" in \" + JSON.stringify(result, null, 2).substring(0, 100));\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            var fragment = void 0;\n            if (isInlineFragment(selection)) {\n                fragment = selection;\n            }\n            else {\n                fragment = (fragmentMap || {})[selection.name.value];\n                if (!fragment) {\n                    throw new Error(\"No fragment named \" + selection.name.value + \".\");\n                }\n            }\n            var matches = true;\n            if (context.fragmentMatcherFunction && fragment.typeCondition) {\n                var idValue = { type: 'id', id: 'self', generated: false };\n                var fakeContext = {\n                    store: new ObjectCache({ self: result }),\n                    returnPartialData: false,\n                    hasMissingField: false,\n                    cacheResolvers: {},\n                };\n                matches = context.fragmentMatcherFunction(idValue, fragment.typeCondition.name.value, fakeContext);\n                if (!isProduction() && fakeContext.returnPartialData) {\n                    console.error('WARNING: heuristic fragment matching going on!');\n                }\n            }\n            if (included && matches) {\n                writeSelectionSetToStore({\n                    result: result,\n                    selectionSet: fragment.selectionSet,\n                    dataId: dataId,\n                    context: context,\n                });\n            }\n        }\n    });\n    return store;\n}\nfunction isGeneratedId(id) {\n    return id[0] === '$';\n}\nfunction mergeWithGenerated(generatedKey, realKey, cache) {\n    var generated = cache.get(generatedKey);\n    var real = cache.get(realKey);\n    Object.keys(generated).forEach(function (key) {\n        var value = generated[key];\n        var realValue = real[key];\n        if (isIdValue(value) && isGeneratedId(value.id) && isIdValue(realValue)) {\n            mergeWithGenerated(value.id, realValue.id, cache);\n        }\n        cache.delete(generatedKey);\n        cache.set(realKey, __assign({}, generated, real));\n    });\n}\nfunction isDataProcessed(dataId, field, processedData) {\n    if (!processedData) {\n        return false;\n    }\n    if (processedData[dataId]) {\n        if (processedData[dataId].indexOf(field) >= 0) {\n            return true;\n        }\n        else {\n            processedData[dataId].push(field);\n        }\n    }\n    else {\n        processedData[dataId] = [field];\n    }\n    return false;\n}\nfunction writeFieldToStore(_a) {\n    var field = _a.field, value = _a.value, dataId = _a.dataId, context = _a.context;\n    var variables = context.variables, dataIdFromObject = context.dataIdFromObject, store = context.store;\n    var storeValue;\n    var storeObject;\n    var storeFieldName = storeKeyNameFromField(field, variables);\n    var shouldMerge = false;\n    var generatedKey = '';\n    if (!field.selectionSet || value === null) {\n        storeValue =\n            value != null && typeof value === 'object'\n                ?\n                    { type: 'json', json: value }\n                :\n                    value;\n    }\n    else if (Array.isArray(value)) {\n        var generatedId = dataId + \".\" + storeFieldName;\n        storeValue = processArrayValue(value, generatedId, field.selectionSet, context);\n    }\n    else {\n        var valueDataId = dataId + \".\" + storeFieldName;\n        var generated = true;\n        if (!isGeneratedId(valueDataId)) {\n            valueDataId = '$' + valueDataId;\n        }\n        if (dataIdFromObject) {\n            var semanticId = dataIdFromObject(value);\n            if (semanticId && isGeneratedId(semanticId)) {\n                throw new Error('IDs returned by dataIdFromObject cannot begin with the \"$\" character.');\n            }\n            if (semanticId) {\n                valueDataId = semanticId;\n                generated = false;\n            }\n        }\n        if (!isDataProcessed(valueDataId, field, context.processedData)) {\n            writeSelectionSetToStore({\n                dataId: valueDataId,\n                result: value,\n                selectionSet: field.selectionSet,\n                context: context,\n            });\n        }\n        storeValue = {\n            type: 'id',\n            id: valueDataId,\n            generated: generated,\n        };\n        storeObject = store.get(dataId);\n        if (storeObject && storeObject[storeFieldName] !== storeValue) {\n            var escapedId = storeObject[storeFieldName];\n            if (isIdValue(storeValue) &&\n                storeValue.generated &&\n                isIdValue(escapedId) &&\n                !escapedId.generated) {\n                throw new Error(\"Store error: the application attempted to write an object with no provided id\" +\n                    (\" but the store already contains an id of \" + escapedId.id + \" for this object. The selectionSet\") +\n                    \" that was trying to be written is:\\n\" +\n                    print(field));\n            }\n            if (isIdValue(escapedId) && escapedId.generated) {\n                generatedKey = escapedId.id;\n                shouldMerge = true;\n            }\n        }\n    }\n    var newStoreObj = __assign({}, store.get(dataId), (_b = {}, _b[storeFieldName] = storeValue, _b));\n    if (shouldMerge) {\n        mergeWithGenerated(generatedKey, storeValue.id, store);\n    }\n    storeObject = store.get(dataId);\n    if (!storeObject || storeValue !== storeObject[storeFieldName]) {\n        store.set(dataId, newStoreObj);\n    }\n    var _b;\n}\nfunction processArrayValue(value, generatedId, selectionSet, context) {\n    return value.map(function (item, index) {\n        if (item === null) {\n            return null;\n        }\n        var itemDataId = generatedId + \".\" + index;\n        if (Array.isArray(item)) {\n            return processArrayValue(item, itemDataId, selectionSet, context);\n        }\n        var generated = true;\n        if (context.dataIdFromObject) {\n            var semanticId = context.dataIdFromObject(item);\n            if (semanticId) {\n                itemDataId = semanticId;\n                generated = false;\n            }\n        }\n        if (!isDataProcessed(itemDataId, selectionSet, context.processedData)) {\n            writeSelectionSetToStore({\n                dataId: itemDataId,\n                result: item,\n                selectionSet: selectionSet,\n                context: context,\n            });\n        }\n        var idStoreValue = {\n            type: 'id',\n            id: itemDataId,\n            generated: generated,\n        };\n        return idStoreValue;\n    });\n}\n//# sourceMappingURL=writeToStore.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport graphqlAnywhere from 'graphql-anywhere';\nimport { assign, isEqual, getDefaultValues, getQueryDefinition, isJsonValue, isIdValue, getStoreKeyName, } from 'apollo-utilities';\nexport var ID_KEY = typeof Symbol !== 'undefined' ? Symbol('id') : '@@id';\nexport function readQueryFromStore(options) {\n    var optsPatch = { returnPartialData: false };\n    return diffQueryAgainstStore(__assign({}, options, optsPatch)).result;\n}\nvar readStoreResolver = function (fieldName, idValue, args, context, _a) {\n    var resultKey = _a.resultKey, directives = _a.directives;\n    assertIdValue(idValue);\n    var objId = idValue.id;\n    var obj = context.store.get(objId);\n    var storeKeyName = getStoreKeyName(fieldName, args, directives);\n    var fieldValue = (obj || {})[storeKeyName];\n    if (typeof fieldValue === 'undefined') {\n        if (context.cacheResolvers &&\n            obj &&\n            (obj.__typename || objId === 'ROOT_QUERY')) {\n            var typename = obj.__typename || 'Query';\n            var type = context.cacheResolvers[typename];\n            if (type) {\n                var resolver = type[fieldName];\n                if (resolver) {\n                    fieldValue = resolver(obj, args);\n                }\n            }\n        }\n    }\n    if (typeof fieldValue === 'undefined') {\n        if (!context.returnPartialData) {\n            throw new Error(\"Can't find field \" + storeKeyName + \" on object (\" + objId + \") \" + JSON.stringify(obj, null, 2) + \".\");\n        }\n        context.hasMissingField = true;\n        return fieldValue;\n    }\n    if (isJsonValue(fieldValue)) {\n        if (idValue.previousResult &&\n            isEqual(idValue.previousResult[resultKey], fieldValue.json)) {\n            return idValue.previousResult[resultKey];\n        }\n        return fieldValue.json;\n    }\n    if (idValue.previousResult) {\n        fieldValue = addPreviousResultToIdValues(fieldValue, idValue.previousResult[resultKey]);\n    }\n    return fieldValue;\n};\nexport function diffQueryAgainstStore(_a) {\n    var store = _a.store, query = _a.query, variables = _a.variables, previousResult = _a.previousResult, _b = _a.returnPartialData, returnPartialData = _b === void 0 ? true : _b, _c = _a.rootId, rootId = _c === void 0 ? 'ROOT_QUERY' : _c, fragmentMatcherFunction = _a.fragmentMatcherFunction, config = _a.config;\n    var queryDefinition = getQueryDefinition(query);\n    variables = assign({}, getDefaultValues(queryDefinition), variables);\n    var context = {\n        store: store,\n        returnPartialData: returnPartialData,\n        cacheResolvers: (config && config.cacheResolvers) || {},\n        hasMissingField: false,\n    };\n    var rootIdValue = {\n        type: 'id',\n        id: rootId,\n        previousResult: previousResult,\n    };\n    var result = graphqlAnywhere(readStoreResolver, query, rootIdValue, context, variables, {\n        fragmentMatcher: fragmentMatcherFunction,\n        resultMapper: resultMapper,\n    });\n    return {\n        result: result,\n        complete: !context.hasMissingField,\n    };\n}\nexport function assertIdValue(idValue) {\n    if (!isIdValue(idValue)) {\n        throw new Error(\"Encountered a sub-selection on the query, but the store doesn't have an object reference. This should never happen during normal use unless you have custom code that is directly manipulating the store; please file an issue.\");\n    }\n}\nfunction addPreviousResultToIdValues(value, previousResult) {\n    if (isIdValue(value)) {\n        return __assign({}, value, { previousResult: previousResult });\n    }\n    else if (Array.isArray(value)) {\n        var idToPreviousResult_1 = new Map();\n        if (Array.isArray(previousResult)) {\n            previousResult.forEach(function (item) {\n                if (item && item[ID_KEY]) {\n                    idToPreviousResult_1.set(item[ID_KEY], item);\n                }\n            });\n        }\n        return value.map(function (item, i) {\n            var itemPreviousResult = previousResult && previousResult[i];\n            if (isIdValue(item)) {\n                itemPreviousResult =\n                    idToPreviousResult_1.get(item.id) || itemPreviousResult;\n            }\n            return addPreviousResultToIdValues(item, itemPreviousResult);\n        });\n    }\n    return value;\n}\nfunction resultMapper(resultFields, idValue) {\n    if (idValue.previousResult) {\n        var currentResultKeys_1 = Object.keys(resultFields);\n        var sameAsPreviousResult = Object.keys(idValue.previousResult).reduce(function (sameKeys, key) { return sameKeys && currentResultKeys_1.indexOf(key) > -1; }, true) &&\n            currentResultKeys_1.every(function (key) {\n                return areNestedArrayItemsStrictlyEqual(resultFields[key], idValue.previousResult[key]);\n            });\n        if (sameAsPreviousResult) {\n            return idValue.previousResult;\n        }\n    }\n    Object.defineProperty(resultFields, ID_KEY, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: idValue.id,\n    });\n    return resultFields;\n}\nfunction areNestedArrayItemsStrictlyEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!Array.isArray(a) || !Array.isArray(b) || a.length !== b.length) {\n        return false;\n    }\n    return a.every(function (item, i) { return areNestedArrayItemsStrictlyEqual(item, b[i]); });\n}\n//# sourceMappingURL=readFromStore.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar RecordingCache = (function () {\n    function RecordingCache(data) {\n        if (data === void 0) { data = {}; }\n        this.data = data;\n        this.recordedData = {};\n    }\n    RecordingCache.prototype.record = function (transaction) {\n        transaction(this);\n        var recordedData = this.recordedData;\n        this.recordedData = {};\n        return recordedData;\n    };\n    RecordingCache.prototype.toObject = function () {\n        return __assign({}, this.data, this.recordedData);\n    };\n    RecordingCache.prototype.get = function (dataId) {\n        if (this.recordedData.hasOwnProperty(dataId)) {\n            return this.recordedData[dataId];\n        }\n        return this.data[dataId];\n    };\n    RecordingCache.prototype.set = function (dataId, value) {\n        if (this.get(dataId) !== value) {\n            this.recordedData[dataId] = value;\n        }\n    };\n    RecordingCache.prototype.delete = function (dataId) {\n        this.recordedData[dataId] = undefined;\n    };\n    RecordingCache.prototype.clear = function () {\n        var _this = this;\n        Object.keys(this.data).forEach(function (dataId) { return _this.delete(dataId); });\n        this.recordedData = {};\n    };\n    RecordingCache.prototype.replace = function (newData) {\n        this.clear();\n        this.recordedData = __assign({}, newData);\n    };\n    return RecordingCache;\n}());\nexport { RecordingCache };\nexport function record(startingState, transaction) {\n    var recordingCache = new RecordingCache(startingState);\n    return recordingCache.record(transaction);\n}\n//# sourceMappingURL=recordingCache.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { ApolloCache } from 'apollo-cache';\nimport { getFragmentQueryDocument, addTypenameToDocument, } from 'apollo-utilities';\nimport { HeuristicFragmentMatcher } from './fragmentMatcher';\nimport { writeResultToStore } from './writeToStore';\nimport { readQueryFromStore, diffQueryAgainstStore } from './readFromStore';\nimport { defaultNormalizedCacheFactory } from './objectCache';\nimport { record } from './recordingCache';\nvar defaultConfig = {\n    fragmentMatcher: new HeuristicFragmentMatcher(),\n    dataIdFromObject: defaultDataIdFromObject,\n    addTypename: true,\n    storeFactory: defaultNormalizedCacheFactory,\n};\nexport function defaultDataIdFromObject(result) {\n    if (result.__typename) {\n        if (result.id !== undefined) {\n            return result.__typename + \":\" + result.id;\n        }\n        if (result._id !== undefined) {\n            return result.__typename + \":\" + result._id;\n        }\n    }\n    return null;\n}\nvar InMemoryCache = (function (_super) {\n    __extends(InMemoryCache, _super);\n    function InMemoryCache(config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this) || this;\n        _this.optimistic = [];\n        _this.watches = [];\n        _this.silenceBroadcast = false;\n        _this.config = __assign({}, defaultConfig, config);\n        if (_this.config.customResolvers)\n            _this.config.cacheResolvers = _this.config.customResolvers;\n        _this.addTypename = _this.config.addTypename ? true : false;\n        _this.data = _this.config.storeFactory();\n        return _this;\n    }\n    InMemoryCache.prototype.restore = function (data) {\n        if (data)\n            this.data.replace(data);\n        return this;\n    };\n    InMemoryCache.prototype.extract = function (optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        if (optimistic && this.optimistic.length > 0) {\n            var patches = this.optimistic.map(function (opt) { return opt.data; });\n            return Object.assign.apply(Object, [{}, this.data.toObject()].concat(patches));\n        }\n        return this.data.toObject();\n    };\n    InMemoryCache.prototype.read = function (query) {\n        if (query.rootId && this.data.get(query.rootId) === undefined) {\n            return null;\n        }\n        return readQueryFromStore({\n            store: this.config.storeFactory(this.extract(query.optimistic)),\n            query: this.transformDocument(query.query),\n            variables: query.variables,\n            rootId: query.rootId,\n            fragmentMatcherFunction: this.config.fragmentMatcher.match,\n            previousResult: query.previousResult,\n            config: this.config,\n        });\n    };\n    InMemoryCache.prototype.write = function (write) {\n        writeResultToStore({\n            dataId: write.dataId,\n            result: write.result,\n            variables: write.variables,\n            document: this.transformDocument(write.query),\n            store: this.data,\n            dataIdFromObject: this.config.dataIdFromObject,\n            fragmentMatcherFunction: this.config.fragmentMatcher.match,\n        });\n        this.broadcastWatches();\n    };\n    InMemoryCache.prototype.diff = function (query) {\n        return diffQueryAgainstStore({\n            store: this.config.storeFactory(this.extract(query.optimistic)),\n            query: this.transformDocument(query.query),\n            variables: query.variables,\n            returnPartialData: query.returnPartialData,\n            previousResult: query.previousResult,\n            fragmentMatcherFunction: this.config.fragmentMatcher.match,\n            config: this.config,\n        });\n    };\n    InMemoryCache.prototype.watch = function (watch) {\n        var _this = this;\n        this.watches.push(watch);\n        return function () {\n            _this.watches = _this.watches.filter(function (c) { return c !== watch; });\n        };\n    };\n    InMemoryCache.prototype.evict = function (query) {\n        throw new Error(\"eviction is not implemented on InMemory Cache\");\n    };\n    InMemoryCache.prototype.reset = function () {\n        this.data.clear();\n        this.broadcastWatches();\n        return Promise.resolve();\n    };\n    InMemoryCache.prototype.removeOptimistic = function (id) {\n        var _this = this;\n        var toPerform = this.optimistic.filter(function (item) { return item.id !== id; });\n        this.optimistic = [];\n        toPerform.forEach(function (change) {\n            _this.recordOptimisticTransaction(change.transaction, change.id);\n        });\n        this.broadcastWatches();\n    };\n    InMemoryCache.prototype.performTransaction = function (transaction) {\n        var alreadySilenced = this.silenceBroadcast;\n        this.silenceBroadcast = true;\n        transaction(this);\n        if (!alreadySilenced) {\n            this.silenceBroadcast = false;\n        }\n        this.broadcastWatches();\n    };\n    InMemoryCache.prototype.recordOptimisticTransaction = function (transaction, id) {\n        var _this = this;\n        this.silenceBroadcast = true;\n        var patch = record(this.extract(true), function (recordingCache) {\n            var dataCache = _this.data;\n            _this.data = recordingCache;\n            _this.performTransaction(transaction);\n            _this.data = dataCache;\n        });\n        this.optimistic.push({\n            id: id,\n            transaction: transaction,\n            data: patch,\n        });\n        this.silenceBroadcast = false;\n        this.broadcastWatches();\n    };\n    InMemoryCache.prototype.transformDocument = function (document) {\n        if (this.addTypename)\n            return addTypenameToDocument(document);\n        return document;\n    };\n    InMemoryCache.prototype.readQuery = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return this.read({\n            query: options.query,\n            variables: options.variables,\n            optimistic: optimistic,\n        });\n    };\n    InMemoryCache.prototype.readFragment = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return this.read({\n            query: this.transformDocument(getFragmentQueryDocument(options.fragment, options.fragmentName)),\n            variables: options.variables,\n            rootId: options.id,\n            optimistic: optimistic,\n        });\n    };\n    InMemoryCache.prototype.writeQuery = function (options) {\n        this.write({\n            dataId: 'ROOT_QUERY',\n            result: options.data,\n            query: this.transformDocument(options.query),\n            variables: options.variables,\n        });\n    };\n    InMemoryCache.prototype.writeFragment = function (options) {\n        this.write({\n            dataId: options.id,\n            result: options.data,\n            query: this.transformDocument(getFragmentQueryDocument(options.fragment, options.fragmentName)),\n            variables: options.variables,\n        });\n    };\n    InMemoryCache.prototype.broadcastWatches = function () {\n        var _this = this;\n        if (this.silenceBroadcast)\n            return;\n        this.watches.forEach(function (c) {\n            var newData = _this.diff({\n                query: c.query,\n                variables: c.variables,\n                previousResult: c.previousResult && c.previousResult(),\n                optimistic: c.optimistic,\n            });\n            c.callback(newData);\n        });\n    };\n    return InMemoryCache;\n}(ApolloCache));\nexport { InMemoryCache };\n//# sourceMappingURL=inMemoryCache.js.map"],"names":["isTest","warnOnceInDevelopment","__extends","this","__assign","print","getQueryDefinition","assign","getDefaultValues","getOperationDefinition","createFragmentMap","getFragmentDefinitions","shouldInclude","isField","resultKeyNameFromField","isProduction","isInlineFragment","isIdValue","storeKeyNameFromField","getStoreKeyName","isJsonValue","isEqual","addTypenameToDocument","getFragmentQueryDocument","ApolloCache"],"mappings":"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"}