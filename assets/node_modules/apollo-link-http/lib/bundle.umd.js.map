{"version":3,"file":"bundle.umd.js","sources":["httpLink.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport { ApolloLink, Observable } from 'apollo-link';\nimport { print } from 'graphql/language/printer';\nvar throwServerError = function (response, result, message) {\n    var error = new Error(message);\n    error.response = response;\n    error.statusCode = response.status;\n    error.result = result;\n    throw error;\n};\nvar parseAndCheckResponse = function (request) { return function (response) {\n    return response\n        .text()\n        .then(function (bodyText) {\n        try {\n            return JSON.parse(bodyText);\n        }\n        catch (err) {\n            var parseError = err;\n            parseError.response = response;\n            parseError.statusCode = response.status;\n            parseError.bodyText = bodyText;\n            return Promise.reject(parseError);\n        }\n    })\n        .then(function (result) {\n        if (response.status >= 300) {\n            throwServerError(response, result, \"Response not successful: Received status code \" + response.status);\n        }\n        if (!result.hasOwnProperty('data') && !result.hasOwnProperty('errors')) {\n            throwServerError(response, result, \"Server response was missing for query '\" + request.operationName + \"'.\");\n        }\n        return result;\n    });\n}; };\nvar checkFetcher = function (fetcher) {\n    if (fetcher.use) {\n        throw new Error(\"\\n      It looks like you're using apollo-fetch! Apollo Link now uses native fetch\\n      implementation, so apollo-fetch is not needed. If you want to use your existing\\n      apollo-fetch middleware, please check this guide to upgrade:\\n        https://github.com/apollographql/apollo-link/blob/master/docs/implementation.md\\n    \");\n    }\n};\nvar warnIfNoFetch = function (fetcher) {\n    if (!fetcher && typeof fetch === 'undefined') {\n        var library = 'unfetch';\n        if (typeof window === 'undefined')\n            library = 'node-fetch';\n        throw new Error(\"fetch is not found globally and no fetcher passed, to fix pass a fetch for\\n      your environment like https://www.npmjs.com/package/\" + library + \".\\n\\n      For example:\\n        import fetch from '\" + library + \"';\\n        import { createHttpLink } from 'apollo-link-http';\\n\\n        const link = createHttpLink({ uri: '/graphql', fetch: fetch });\\n      \");\n    }\n};\nvar createSignalIfSupported = function () {\n    if (typeof AbortController === 'undefined')\n        return { controller: false, signal: false };\n    var controller = new AbortController();\n    var signal = controller.signal;\n    return { controller: controller, signal: signal };\n};\nvar defaultHttpOptions = {\n    includeQuery: true,\n    includeExtensions: false,\n};\nexport var createHttpLink = function (linkOptions) {\n    if (linkOptions === void 0) { linkOptions = {}; }\n    var uri = linkOptions.uri, fetcher = linkOptions.fetch, includeExtensions = linkOptions.includeExtensions, requestOptions = __rest(linkOptions, [\"uri\", \"fetch\", \"includeExtensions\"]);\n    warnIfNoFetch(fetcher);\n    if (fetcher)\n        checkFetcher(fetcher);\n    if (!fetcher)\n        fetcher = fetch;\n    if (!uri)\n        uri = '/graphql';\n    return new ApolloLink(function (operation) {\n        return new Observable(function (observer) {\n            var _a = operation.getContext(), headers = _a.headers, credentials = _a.credentials, _b = _a.fetchOptions, fetchOptions = _b === void 0 ? {} : _b, contextURI = _a.uri, _c = _a.http, httpOptions = _c === void 0 ? {} : _c;\n            var operationName = operation.operationName, extensions = operation.extensions, variables = operation.variables, query = operation.query;\n            var http = __assign({}, defaultHttpOptions, httpOptions);\n            var body = { operationName: operationName, variables: variables };\n            if (includeExtensions || http.includeExtensions)\n                body.extensions = extensions;\n            if (http.includeQuery)\n                body.query = print(query);\n            var serializedBody;\n            try {\n                serializedBody = JSON.stringify(body);\n            }\n            catch (e) {\n                var parseError = new Error(\"Network request failed. Payload is not serializable: \" + e.message);\n                parseError.parseError = e;\n                throw parseError;\n            }\n            var options = fetchOptions;\n            if (requestOptions.fetchOptions)\n                options = __assign({}, requestOptions.fetchOptions, options);\n            var fetcherOptions = __assign({ method: 'POST' }, options, { headers: {\n                    accept: '*/*',\n                    'content-type': 'application/json',\n                }, body: serializedBody });\n            if (requestOptions.credentials)\n                fetcherOptions.credentials = requestOptions.credentials;\n            if (credentials)\n                fetcherOptions.credentials = credentials;\n            if (requestOptions.headers)\n                fetcherOptions.headers = __assign({}, fetcherOptions.headers, requestOptions.headers);\n            if (headers)\n                fetcherOptions.headers = __assign({}, fetcherOptions.headers, headers);\n            var _d = createSignalIfSupported(), controller = _d.controller, signal = _d.signal;\n            if (controller)\n                fetcherOptions.signal = signal;\n            fetcher(contextURI || uri, fetcherOptions)\n                .then(function (response) {\n                operation.setContext({ response: response });\n                return response;\n            })\n                .then(parseAndCheckResponse(operation))\n                .then(function (result) {\n                observer.next(result);\n                observer.complete();\n                return result;\n            })\n                .catch(function (err) {\n                if (err.name === 'AbortError')\n                    return;\n                observer.error(err);\n            });\n            return function () {\n                if (controller)\n                    controller.abort();\n            };\n        });\n    });\n};\nvar HttpLink = (function (_super) {\n    __extends(HttpLink, _super);\n    function HttpLink(opts) {\n        return _super.call(this, createHttpLink(opts).request) || this;\n    }\n    return HttpLink;\n}(ApolloLink));\nexport { HttpLink };\n//# sourceMappingURL=httpLink.js.map"],"names":["this","ApolloLink","Observable","print"],"mappings":"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"}